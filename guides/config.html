<div id="preamble">
<div class="sectionbody">
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
The content of this guide and been revised and split into additional topics. Please check the
<a href="#additional-information">Additional Information</a> section.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Hardcoded values in your code are a <em>no-go</em> (even if we all did it at some point ;-)).
In this guide, we will learn how to configure a Quarkus application.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Unresolved directive in config.adoc - include::{includes}/prerequisites.adoc[]</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="solution"><a class="anchor" href="#solution"></a>Solution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We recommend that you follow the instructions in the next sections and create the application step by step.
However, you can go right to the completed example.</p>
</div>
<div class="paragraph">
<p>Clone the Git repository: <code>git clone <a href="https://github.com/quarkusio/quarkus-quickstarts.git" class="bare">https://github.com/quarkusio/quarkus-quickstarts.git</a></code>, or download an <a href="https://github.com/quarkusio/quarkus-quickstarts/archive/main.zip">archive</a>.</p>
</div>
<div class="paragraph">
<p>The solution is located in the <code>config-quickstart</code> <a href="https://github.com/quarkusio/quarkus-quickstarts/tree/main/config-quickstart">directory</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-the-maven-project"><a class="anchor" href="#create-the-maven-project"></a>Create the Maven project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, we need a new project. Create a new project with the following command:</p>
</div>
<div class="paragraph">
<p>Unresolved directive in config.adoc - include::{includes}/devtools/create-app.adoc[]</p>
</div>
<div class="paragraph">
<p>It generates:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the Maven structure</p>
</li>
<li>
<p>a landing page accessible on <code><a href="http://localhost:8080" class="bare">http://localhost:8080</a></code></p>
</li>
<li>
<p>example <code>Dockerfile</code> files for both <code>native</code> and <code>jvm</code> modes</p>
</li>
<li>
<p>the application configuration file</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-the-configuration"><a class="anchor" href="#create-the-configuration"></a>Create the configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A Quarkus application uses the <a href="https://github.com/smallrye/smallrye-config">SmallRye Config</a> API to provide all
mechanisms related with configuration.</p>
</div>
<div class="paragraph">
<p>By default, Quarkus reads configuration properties from <a href="config-reference#configuration-sources">several sources</a>.
For the purpose of this guide, we will use an application configuration file located in <code>src/main/resources/application.properties</code>.</p>
</div>
<div class="paragraph">
<p>Edit the file with the following content:</p>
</div>
<div class="listingblock">
<div class="title">application.properties</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># Your configuration properties
greeting.message = hello
greeting.name = quarkus</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="create-a-rest-resource"><a class="anchor" href="#create-a-rest-resource"></a>Create a REST resource</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create the <code>org.acme.config.GreetingResource</code> REST resource with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.config;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.core.MediaType;

@Path("/greeting")
public class GreetingResource {

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String hello() {
        return "Hello RESTEasy";
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="inject-the-configuration"><a class="anchor" href="#inject-the-configuration"></a>Inject the configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus uses <a href="https://microprofile.io/project/eclipse/microprofile-config">MicroProfile Config</a> annotations to inject the
configuration properties in the application.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ConfigProperty(name = "greeting.message") <i class="conum" data-value="1"></i><b>(1)</b>
String message;</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>You can use <code>@Inject @ConfigProperty</code> or just <code>@ConfigProperty</code>. The <code>@Inject</code> annotation is not necessary for
members annotated with <code>@ConfigProperty</code>.</td>
</tr>
</table>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
If the application attempts to inject a configuration property that is not set, an error is thrown.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Edit the <code>org.acme.config.GreetingResource</code>, and introduce the following configuration properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@ConfigProperty(name = "greeting.message") <i class="conum" data-value="1"></i><b>(1)</b>
String message;

@ConfigProperty(name = "greeting.suffix", defaultValue="!") <i class="conum" data-value="2"></i><b>(2)</b>
String suffix;

@ConfigProperty(name = "greeting.name")
Optional&lt;String&gt; name; <i class="conum" data-value="3"></i><b>(3)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>If you do not provide a value for this property, the application startup fails with <code>jakarta.enterprise.inject.spi.DeploymentException: No config value of type [class java.lang.String] exists for: greeting.message</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>The default value is injected if the configuration does not provide a value for <code>greeting.suffix</code>.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>This property is optional - an empty <code>Optional</code> is injected if the configuration does not provide a value for <code>greeting.name</code>.</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Now, modify the <code>hello</code> method to use the injected properties:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">@GET
@Produces(MediaType.TEXT_PLAIN)
public String hello() {
    return message + " " + name.orElse("world") + suffix;
}</code></pre>
</div>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
Use <code>@io.smallrye.config.ConfigMapping</code> annotation to group multiple configurations in a single interface. Please,
check the <a href="https://smallrye.io/smallrye-config/Main/config/mappings/">Config Mappings</a> documentation.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="update-the-test"><a class="anchor" href="#update-the-test"></a>Update the test</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We also need to update the functional test to reflect the changes made to the endpoint.
Create the <code>src/test/java/org/acme/config/GreetingResourceTest.java</code> file with the following content:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.config;

import io.quarkus.test.junit.QuarkusTest;
import org.junit.jupiter.api.Test;

import static io.restassured.RestAssured.given;
import static org.hamcrest.CoreMatchers.is;

@QuarkusTest
public class GreetingResourceTest {

    @Test
    public void testHelloEndpoint() {
        given()
          .when().get("/greeting")
          .then()
             .statusCode(200)
             .body(is("hello quarkus!")); // Modified line
    }

}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="package-and-run-the-application"><a class="anchor" href="#package-and-run-the-application"></a>Package and run the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Run the application with:</p>
</div>
<div class="paragraph">
<p>Unresolved directive in config.adoc - include::{includes}/devtools/dev.adoc[]</p>
</div>
<div class="paragraph">
<p>Open your browser to <a href="http://localhost:8080/greeting" class="bare">http://localhost:8080/greeting</a>.</p>
</div>
<div class="paragraph">
<p>Changing the configuration file is immediately reflected.
You can add the <code>greeting.suffix</code>, remove the other properties, change the values, etc.</p>
</div>
<div class="paragraph">
<p>As usual, the application can be packaged using:</p>
</div>
<div class="paragraph">
<p>Unresolved directive in config.adoc - include::{includes}/devtools/build.adoc[]</p>
</div>
<div class="paragraph">
<p>and executed using <code>java -jar target/quarkus-app/quarkus-run.jar</code>.</p>
</div>
<div class="paragraph">
<p>You can also generate the native executable with:</p>
</div>
<div class="paragraph">
<p>Unresolved directive in config.adoc - include::{includes}/devtools/build-native.adoc[]</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="programmatically-access-the-configuration"><a class="anchor" href="#programmatically-access-the-configuration"></a>Programmatically access the configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The <code>org.eclipse.microprofile.config.ConfigProvider.getConfig()</code> API allows to access the Config API programmatically.
This API is mostly useful in situations where CDI injection is not available.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">String databaseName = ConfigProvider.getConfig().getValue("database.name", String.class);
Optional&lt;String&gt; maybeDatabaseName = ConfigProvider.getConfig().getOptionalValue("database.name", String.class);</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuring-quarkus"><a class="anchor" href="#configuring-quarkus"></a>Configuring Quarkus</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus itself is configured via the same mechanism as your application. Quarkus reserves the <code>quarkus.</code> namespace
for its own configuration. For example to configure the HTTP server port you can set <code>quarkus.http.port</code> in
<code>application.properties</code>. All the Quarkus configuration properties are <a href="all-config">documented and searchable</a>.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
<div class="paragraph">
<p>As mentioned above, properties prefixed with <code>quarkus.</code> are effectively reserved for configuring Quarkus itself and its
extensions. Therefore, the <code>quarkus.</code> prefix should <strong>never</strong> be used for application specific properties.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="sect2">
<h3 id="build-time-configuration"><a class="anchor" href="#build-time-configuration"></a>Build Time configuration</h3>
<div class="paragraph">
<p>Some Quarkus configurations only take effect during build time, meaning is not possible to change them at runtime. These
configurations are still available at runtime but as read-only and have no effect in Quarkus behaviour. A change to any
of these configurations requires a rebuild of the application itself to reflect changes of such properties.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
The properties fixed at build time are marked with a lock icon (<span class="icon"><i class="fa fa-lock"></i></span>) in the <a href="all-config">list of all configuration options</a>.
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>However, some extensions do define properties <em>overridable at runtime</em>. A simple example is the database URL, username
and password which is only known specifically in your target environment, so they can be set and influence the
application behaviour at runtime.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="additional-information"><a class="anchor" href="#additional-information"></a>Additional Information</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="config-reference">Configuration Reference Guide</a></p>
</li>
<li>
<p><a href="config-yaml">YAML ConfigSource Extension</a></p>
</li>
<li>
<p><a href="vault">HashiCorp Vault ConfigSource Extension</a></p>
</li>
<li>
<p><a href="consul-config">Consul ConfigSource Extension</a></p>
</li>
<li>
<p><a href="spring-cloud-config-client">Spring Cloud ConfigSource Extension</a></p>
</li>
<li>
<p><a href="config-mappings">Mapping configuration to objects</a></p>
</li>
<li>
<p><a href="config-extending-support">Extending configuration support</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Quarkus relies on <a href="https://github.com/smallrye/smallrye-config/">SmallRye Config</a> and inherits its features:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Additional <code>ConfigSource</code>s</p>
</li>
<li>
<p>Additional <code>Converter</code>s</p>
</li>
<li>
<p>Indexed properties</p>
</li>
<li>
<p>Parent profile</p>
</li>
<li>
<p>Interceptors for configuration value resolution</p>
</li>
<li>
<p>Relocate configuration properties</p>
</li>
<li>
<p>Fallback configuration properties</p>
</li>
<li>
<p>Logging</p>
</li>
<li>
<p>Hide secrets</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information, please check the
<a href="https://smallrye.io/smallrye-config/Main/">SmallRye Config documentation</a>.</p>
</div>
</div>
</div>