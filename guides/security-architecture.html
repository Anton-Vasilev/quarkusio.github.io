<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The Quarkus Security architecture provides several built-in authentication mechanisms and is highly customizable.
The primary mechanism for securing HTTP applications in Quarkus is the <code>HttpAuthenticationMechanism</code> interface.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview-of-the-quarkus-security-architecture"><a class="anchor" href="#overview-of-the-quarkus-security-architecture"></a>Overview of the Quarkus Security architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>When a client sends an HTTP request, Quarkus Security orchestrates security authentication and authorization by interacting with several built-in core components including <code>HttpAuthenticationMechanism</code>, <code>IdentityProvider</code>, and <code>SecurityIdentityAugmentor</code>.</p>
</div>
<div class="paragraph">
<p>The sequential security validation process results in one of three outcomes:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>The HTTP request gets authenticated and authorized and access to the Quarkus application gets granted.</p>
</li>
<li>
<p>The HTTP request authentication fails and the requester receives a challenge.</p>
</li>
<li>
<p>The HTTP request authorization fails and the requester gets denied access to the Quarkus application.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The following diagram steps through the detailed process flow of the Quarkus Security architecture:</p>
</div>
<div class="imageblock text-center">
<div class="content">
<img src="security-architecture-overview.png" alt="Quarkus Security architecture process flow" width="60%">
</div>
<div class="title">Figure 1. The Quarkus Security architecture and process flow</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="core-components-of-the-quarkus-security-architecture"><a class="anchor" href="#core-components-of-the-quarkus-security-architecture"></a>Core components of the Quarkus Security architecture</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="httpauthenticationmechanism"><a class="anchor" href="#httpauthenticationmechanism"></a><code>HttpAuthenticationMechanism</code></h3>
<div class="paragraph">
<p>Quarkus Security uses <code>HttpAuthenticationMechanism</code> to extract the authentication credentials from the HTTP request and delegates them to <code>IdentityProvider</code> to convert the credentials to <code>SecurityIdentity</code>.
For example, the credentials can come from the <code>Authorization</code> header, client HTTPS certificates, or cookies.</p>
</div>
</div>
<div class="sect2">
<h3 id="identityprovider"><a class="anchor" href="#identityprovider"></a><code>IdentityProvider</code></h3>
<div class="paragraph">
<p><code>IdentityProvider</code> verifies the authentication credentials and maps them to <code>SecurityIdentity</code>, which has the username, roles, original authentication credentials, and other attributes.</p>
</div>
<div class="paragraph">
<p>You can inject a <code>SecurityIdentity</code> instance for every authenticated resource to get the authenticated identity information.</p>
</div>
<div class="paragraph">
<p>In other contexts, it is possible to have other parallel representations of the same information or parts of it, for example, <code>SecurityContext</code> for Jakarta REST or <code>JsonWebToken</code> for JSON Web Tokens (JWT).</p>
</div>
<div class="paragraph">
<p>For more information, see the Quarkus <a href="security-identity-providers">Identity providers</a> guide.</p>
</div>
</div>
<div class="sect2">
<h3 id="securityidentityaugmentor"><a class="anchor" href="#securityidentityaugmentor"></a><code>SecurityIdentityAugmentor</code></h3>
<div class="paragraph">
<p>Because Quarkus Security is customizable, for example, you can add authorization roles to <code>SecurityIdentity</code>, you can register and prioritize one or more custom security augmentors.</p>
</div>
<div class="paragraph">
<p>Registered instances of <code>SecurityIdentityAugmentor</code> are invoked during the final stage of the security authentication process.
For more information, see the <a href="security-customization#security-identity-customization">Security Identity Customization</a> section of the "Security Tips and Tricks" guide.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="supported-authentication-mechanisms"><a class="anchor" href="#supported-authentication-mechanisms"></a>Supported authentication mechanisms</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To learn more about security authentication in Quarkus and the supported mechanisms and protocols, see the Quarkus <a href="security-authentication-mechanisms">Authentication mechanisms in Quarkus</a> guide.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="proactive-authentication"><a class="anchor" href="#proactive-authentication"></a>Proactive authentication</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Proactive authentication is enabled in Quarkus by default.
The request is always authenticated if an incoming request has a credential, even if the target page does not require authentication.
For more information, see the Quarkus <a href="security-proactive-authentication">Proactive authentication</a> guide.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="quarkus-security-customization"><a class="anchor" href="#quarkus-security-customization"></a>Quarkus Security customization</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus Security is also highly customizable.
You can customize the following core security components of Quarkus:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><code>HttpAuthenticationMechanism</code></p>
</li>
<li>
<p><code>IdentityProvider</code></p>
</li>
<li>
<p><code>SecurityidentityAugmentor</code></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>For more information about customizing Quarkus Security, including reactive security and how to register a security provider, see the Quarkus <a href="{url-quarkusio-guides}security-customization">Security tips and tricks</a> guide.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="references"><a class="anchor" href="#references"></a>References</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="security-overview">Quarkus Security overview</a></p>
</li>
<li>
<p><a href="security-authentication-mechanisms#other-supported-authentication-mechanisms">Other supported authentication mechanisms</a></p>
</li>
<li>
<p><a href="security-identity-providers">Identity providers</a></p>
</li>
<li>
<p><a href="security-authorize-web-endpoints-reference">Authorization of web endpoints</a></p>
</li>
</ul>
</div>
</div>
</div>