<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus provides support for properties file-based authentication intended for development and testing purposes.
It is not recommended to use this authentication in production as, at present, only plain-text and MD5 hashed passwords are used, and properties files are generally too limited.</p>
</div>
<div class="paragraph">
<p>Add the following to your build file:</p>
</div>
<div class="listingblock primary asciidoc-tabs-target-sync-cli asciidoc-tabs-target-sync-maven">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-elytron-security-properties-file&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-target-sync-gradle">
<div class="title">build.gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">implementation("io.quarkus:quarkus-elytron-security-properties-file")</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The elytron-security-properties-file extension currently supports two different realms for storing authentication and authorization information.
Both support storage of this information in properties files.</p>
</div>
<div class="paragraph">
<p>The following sections detail the specific configuration properties.</p>
</div>
<div class="sect2">
<h3 id="properties-files-realm-configuration"><a class="anchor" href="#properties-files-realm-configuration"></a>Properties Files Realm Configuration</h3>
<div class="paragraph">
<p>The properties files realm supports the mapping of users to passwords and users to roles with a combination of properties files.
They are configured with properties starting with
<code>quarkus.security.users.file</code>.</p>
</div>
<div class="listingblock">
<div class="title">Example of the <code>application.properties</code> file section for property files realm</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.security.users.file.enabled=true
quarkus.security.users.file.users=test-users.properties
quarkus.security.users.file.roles=test-roles.properties
quarkus.security.users.file.realm-name=MyRealm
quarkus.security.users.file.plain-text=true</code></pre>
</div>
</div>
<div class="sect3">
<h4 id="users-properties"><a class="anchor" href="#users-properties"></a>Users.properties</h4>
<div class="paragraph">
<p>The <code>quarkus.security.users.file.users</code> configuration property specifies a classpath resource which is a properties file with a user-to-password mapping, one per line.</p>
</div>
<div class="paragraph">
<p>The following <a href="#test-users-example">Example of <code>test-users.properties</code></a> illustrates the format:</p>
</div>
<div id="test-users-example" class="listingblock">
<div class="title">Example of <code>test-users.properties</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">scott=jb0ss <i class="conum" data-value="1"></i><b>(1)</b>
jdoe=p4ssw0rd <i class="conum" data-value="2"></i><b>(2)</b>
stuart=test
noadmin=n0Adm1n</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>User <code>scott</code> has password defined as <code>jb0ss</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>User <code>jdoe</code> has password defined as <code>p4ssw0rd</code></td>
</tr>
</table>
</div>
<div class="paragraph">
<p>This file has usernames and passwords stored in plain text, which is not recommended. If plain text is set to false (or omitted) in the config, then passwords must be stored in the form <code>MD5 ( username : realm : password )</code>.
This can be generated for the first example above by running the command <code>echo -n scott:MyRealm:jb0ss | md5</code> from the command line.</p>
</div>
</div>
<div class="sect3">
<h4 id="roles-properties"><a class="anchor" href="#roles-properties"></a>Roles.properties</h4>
<div class="listingblock">
<div class="title">Example of <code>test-roles.properties</code></div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">scott=Admin,admin,Tester,user <i class="conum" data-value="1"></i><b>(1)</b>
jdoe=NoRolesUser <i class="conum" data-value="2"></i><b>(2)</b>
stuart=admin,user <i class="conum" data-value="3"></i><b>(3)</b>
noadmin=user</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>User <code>scott</code> has been assigned the roles <code>Admin</code>, <code>admin</code>, <code>Tester</code> and <code>user</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>User <code>jdoe</code> has been assigned the role <code>NoRolesUser</code></td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>User <code>stuart</code> has been assigned the roles <code>admin</code> and <code>user</code>.</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect2">
<h3 id="embedded-realm-configuration"><a class="anchor" href="#embedded-realm-configuration"></a>Embedded Realm Configuration</h3>
<div class="paragraph">
<p>The embedded realm also supports the mapping of users to passwords and users to roles. It uses the main <code>application.properties</code> Quarkus configuration file to embed this information.
They are configured with properties starting with <code>quarkus.security.users.embedded</code>.</p>
</div>
<div class="paragraph">
<p>The following is an example application.properties file section illustrating the embedded realm configuration:</p>
</div>
<div class="listingblock">
<div class="title">Example of the <code>application.properties</code> file section for embedded realm</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.security.users.embedded.enabled=true
quarkus.security.users.embedded.plain-text=true
quarkus.security.users.embedded.users.scott=jb0ss
quarkus.security.users.embedded.users.stuart=test
quarkus.security.users.embedded.users.jdoe=p4ssw0rd
quarkus.security.users.embedded.users.noadmin=n0Adm1n
quarkus.security.users.embedded.roles.scott=Admin,admin,Tester,user
quarkus.security.users.embedded.roles.stuart=admin,user
quarkus.security.users.embedded.roles.jdoe=NoRolesUser
quarkus.security.users.embedded.roles.noadmin=user</code></pre>
</div>
</div>
<div class="paragraph">
<p>As with the first example, this file has usernames and passwords stored in plain text, which is not recommended. If plain text is set to false (or omitted) in the config, then passwords must be stored in the form <code>MD5 ( username : realm : password )</code>.
This can be generated for the first example above by running the command <code>echo -n scott:MyRealm:jb0ss | md5</code> from the command line.</p>
</div>
<div class="sect3">
<h4 id="embedded-users"><a class="anchor" href="#embedded-users"></a>Embedded Users</h4>
<div class="paragraph">
<p>The user to password mappings are specified in the <code>application.properties</code> file by properties keys of the form <code>quarkus.security.users.embedded.users.&lt;user&gt;=&lt;password&gt;</code>.
The following <a href="#password-example">Example of passwords</a> illustrates the syntax with 4 user-to-password mappings:</p>
</div>
<div id="password-example" class="listingblock">
<div class="title">Example of passwords</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.security.users.embedded.users.scott=jb0ss <i class="conum" data-value="1"></i><b>(1)</b>
quarkus.security.users.embedded.users.stuart=test <i class="conum" data-value="2"></i><b>(2)</b>
quarkus.security.users.embedded.users.jdoe=p4ssw0rd
quarkus.security.users.embedded.users.noadmin=n0Adm1n</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>User <code>scott</code> has password <code>jb0ss</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>User <code>stuart</code> has password <code>test</code></td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="embedded-roles"><a class="anchor" href="#embedded-roles"></a>Embedded Roles</h4>
<div class="paragraph">
<p>The user to role mappings are specified in the <code>application.properties</code> file by properties keys of the form <code>quarkus.security.users.embedded.roles.&lt;user&gt;=role1[,role2[,role3[,&#8230;&#8203;]]]</code>.
The following <a href="#roles-example">Example of roles</a> illustrates the syntax with 4 user-to-role mappings:</p>
</div>
<div id="roles-example" class="listingblock">
<div class="title">Example of roles</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties">quarkus.security.users.embedded.roles.scott=Admin,admin,Tester,user <i class="conum" data-value="1"></i><b>(1)</b>
quarkus.security.users.embedded.roles.stuart=admin,user <i class="conum" data-value="2"></i><b>(2)</b>
quarkus.security.users.embedded.roles.jdoe=NoRolesUser
quarkus.security.users.embedded.roles.noadmin=user</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>User <code>scott</code> has roles <code>Admin</code>, <code>admin</code>, <code>Tester</code>, and <code>user</code></td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>User <code>stuart</code> has roles <code>admin</code> and <code>user</code></td>
</tr>
</table>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="references"><a class="anchor" href="#references"></a>References</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p><a href="security-overview">Quarkus Security overview</a></p>
</li>
</ul>
</div>
</div>
</div>