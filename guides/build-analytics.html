<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>The Quarkus team has limited knowledge, from Maven download numbers, of the remarkable growth of Quarkus and the number of users reporting issues/concerns. Still, we need more insight into the platforms, operating system, Java combinations, and build tools our users employ.
The build analytics tool aims to provide us with this information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-it-works"><a class="anchor" href="#how-it-works"></a>How it works</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Collection happens only at build-time</strong> and not at runtime. Collection occurs during usage of Quarkus build tooling (Maven, Gradle). Your built application does not contain any data collection code.</p>
</div>
<div class="paragraph">
<p><strong>All data collected is anonymous</strong>. There is no way to link this data back to an individual or organization. The intent is to learn about general patterns and trends; therefore, only anonymous data is needed.</p>
</div>
<div class="paragraph">
<p><strong>Collection is disabled by default</strong> You will be asked if you want to opt in to data collection the first time you use dev mode. The console will wait for a few seconds for your input.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="this-is-the-data-being-collected"><a class="anchor" href="#this-is-the-data-being-collected"></a>This is the data being collected</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Anonymous application name. SHA-256 hash of the Group Id + Artifact Id.</p>
</li>
<li>
<p>Anonymous application version. SHA-256 hash of the Artifact Id + Version.</p>
</li>
<li>
<p>Anonymous user id. During the 1st build, this is generated locally at random, and subsequently reused.</p>
</li>
<li>
<p>Quarkus version</p>
</li>
<li>
<p>Java version</p>
</li>
<li>
<p>GraalVM version</p>
</li>
<li>
<p>Operating system details: OS name, OS version and architecture</p>
</li>
<li>
<p>Build system details, such as Maven, Gradle, and so on.</p>
</li>
<li>
<p>If a CI system was detected</p>
</li>
<li>
<p>Country and timezone</p>
</li>
<li>
<p>Extensions enabled. Only extensions whose <code>groupIds</code> start with <code>io.quarkus</code>, <code>io.quarkiverse</code> or are included in the quarkus platform are collected.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>And here is an example of the data payload being sent:</p>
</div>
<div class="listingblock">
<div class="title">Example analytics payload</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-json hljs" data-lang="json">{
  "context": {
    "app": {
      "name": "ZzOlt3q0VgNK0oyUd6NDAhPqJjTSxNOAnqHb5dHfS7M=",
      "version": "FUDdh16tTKtuJkcoY2Wp57IKKwxZ/Hx42tTvi3Izpmc="
    },
    "build": {
      "gradle_version": "N/A",
      "maven_version": "3.8.7"
    },
    "ci": {
      "name": "unknown"
    },
    "graalvm": {
      "java_version": "N/A",
      "vendor": "N/A",
      "version": "N/A"
    },
    "ip": "0.0.0.0",
    "java": {
      "vendor": "Eclipse Adoptium",
      "version": "17.0.4.1"
    },
    "kubernetes": {
      "detected": "false"
    },
    "library": {
      "name": "unknown",
      "version": "unknown"
    },
    "location": {
      "country": "PT"
    },
    "os": {
      "name": "Mac OS X",
      "os_arch": "aarch64",
      "version": "13.3.1"
    },
    "quarkus": {
      "version": "999-SNAPSHOT"
    },
    "timezone": "Europe/Lisbon"
  },
  "event": "PROD_BUILD",
  "integrations": {},
  "messageId": "api-2PCI9LWQM8oRyHIS6fCQMIQ0dlR",
  "originalTimestamp": "2023-05-01T15:21:22.266033Z",
  "properties": {
    "app_extensions": [
      {
        "artifact_id": "quarkus-resteasy-jackson",
        "group_id": "io.quarkus",
        "version": "999-SNAPSHOT"
      },
      {
        "artifact_id": "quarkus-smallrye-openapi",
        "group_id": "io.quarkus",
        "version": "999-SNAPSHOT"
      },
      {
        "artifact_id": "quarkus-hibernate-orm",
        "group_id": "io.quarkus",
        "version": "999-SNAPSHOT"
      },
      {
        "artifact_id": "quarkus-opentelemetry",
        "group_id": "io.quarkus",
        "version": "999-SNAPSHOT"
      },
      {
        "artifact_id": "quarkus-jdbc-postgresql",
        "group_id": "io.quarkus",
        "version": "999-SNAPSHOT"
      },
      {
        "artifact_id": "quarkus-arc",
        "group_id": "io.quarkus",
        "version": "999-SNAPSHOT"
      }
    ]
  },
  "receivedAt": "2023-05-01T15:21:23.184Z",
  "timestamp": "2023-05-01T15:21:22.266Z",
  "type": "track",
  "userId": "872332b4-4b21-42ee-854b-d86c8629e78b"
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="where-are-the-config-files"><a class="anchor" href="#where-are-the-config-files"></a>Where are the config files?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Analytics configurations are stored at the <code>.redhat</code> folder in the user&#8217;s home directory:</p>
</div>
<div class="paragraph">
<p><code>anonymousId</code> is the locally generated anonymous user id.</p>
</div>
<div class="paragraph">
<p><code>io.quarkus.analytics.localconfig</code> holds if the user has agreed to send analytics data or not.</p>
</div>
<div class="paragraph">
<p><code>io.quarkus.analytics.remoteconfig</code> cache of the remote configuration that allows to disable analytics globally.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="show-me-the-code"><a class="anchor" href="#show-me-the-code"></a>Show me the code!</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The bulk of the code is implemented in the <code>analytics-common</code> module. Data is sent using calls to <code>io.quarkus.analytics.AnalyticsService.sendAnalytics(&#8230;&#8203;)</code> from the Maven and Gradle plugins.</p>
</div>
<div class="paragraph">
<p>The uploaded events are stored under the project&#8217;s <code>/target</code> folder with the name <code>build-analytics-event.json</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="how-to-disable-analytics"><a class="anchor" href="#how-to-disable-analytics"></a>How to disable analytics?</h2>
<div class="sectionbody">
<div class="paragraph">
<p><strong>Build time analytics is not active by default.</strong></p>
</div>
<div class="paragraph">
<p>If you have opted in and would like to disable build time analytics, you can do so in two ways:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Globally, by editing the <code>io.quarkus.analytics.localconfig</code> file in the '.redhat' folder of your userâ€™s home directory. Update the file as follows:</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="content">
<pre>{"disabled":true}</pre>
</div>
</div>
<div class="ulist">
<ul>
<li>
<p>Per project, by using the system property <code>quarkus.analytics.disabled=true</code> when building the project.</p>
</li>
</ul>
</div>
<div class="listingblock">
<div class="title">Example using maven</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-bash hljs" data-lang="bash">mvn clean install -Dquarkus.analytics.disabled=true</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="configuration"><a class="anchor" href="#configuration"></a>Configuration</h2>
<div class="sectionbody">
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Configuration property</th>
<th class="tableblock halign-left valign-top">Type</th>
<th class="tableblock halign-left valign-top">Default</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="build-analytics.quarkus.analytics.disabled"></a><code><a href="#build-analytics.quarkus.analytics.disabled">quarkus.analytics.disabled</a></code></p>
<p class="tableblock">Values can be <code>true</code> or <code>false</code>.</p>
<p class="tableblock">Setting this property to <code>true</code> will disable the collection of analytics data on that specific project regardless of any other configuration.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">boolean</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">false</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="build-analytics.quarkus.analytics.uri.base"></a><code><a href="#build-analytics.quarkus.analytics.uri.base">quarkus.analytics.uri.base</a></code></p>
<p class="tableblock">Base URL of the analytics service. This is were all the data is sent to.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">String</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">"https://api.segment.io/"</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><a id="build-analytics.quarkus.analytics.timeout"></a><code><a href="#build-analytics.quarkus.analytics.timeout">quarkus.analytics.timeout</a></code></p>
<p class="tableblock">Value in milliseconds for the timeout of the HTTP request to submit the analytics service.</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">int</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">3000</p></td>
</tr>
</tbody>
</table>
</div>
</div>