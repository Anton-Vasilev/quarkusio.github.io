<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>Create a new tutorial that guides users through creating, running, and testing a Quarkus application that uses annotations from an imaginary extension.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="ulist">
<ul>
<li>
<p>Roughly 15 minutes</p>
</li>
<li>
<p>An editor or IDE that provides syntax highlighting and previews for AsciiDoc, either natively or using a plugin.</p>
</li>
<li>
<p>You should be familiar with the overview of what a <a href="doc-concept#tutorial">Tutorial</a> is.</p>
</li>
<li>
<p>Have the <a href="doc-reference">Quarkus style and content guidelines</a> handy as a reference for required syntax and other conventions.</p>
</li>
</ul>
</div>
</div>
</div>
<div class="sect1">
<h2 id="decide-on-a-title-and-file-name"><a class="anchor" href="#decide-on-a-title-and-file-name"></a>1. Decide on a title and file name</h2>
<div class="sectionbody">
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Decide on a title for the tutorial.
For this worked example, we will use  <code>Serve Http requests using the Acme extension</code>.</p>
</li>
<li>
<p>Decide on a file name.
For this example, we will use <code>acme-serve-http-requests-tutorial.adoc</code>:</p>
<div class="ulist">
<ul>
<li>
<p><code>acme-</code> will group this guide with other resources related to the acme extension</p>
</li>
<li>
<p><code>serve-http-requests</code> is a derivative of the document title</p>
</li>
<li>
<p><code>-tutorial</code> will indicate that this document is a tutorial (optional)</p>
</li>
<li>
<p><code>.adoc</code> to indicate this is an asciidoc file</p>
</li>
</ul>
</div>
</li>
</ol>
</div>
</div>
</div>
<div class="sect1">
<h2 id="copy-the-tutorial-template"><a class="anchor" href="#copy-the-tutorial-template"></a>2. Copy the tutorial template</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Copy <code>docs/src/main/diataxis/_templates/template-tutorial.adoc</code> from the Quarkus repository into a new file called <code>acme-serve-http-requests-tutorial.adoc</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="update-the-document-header"><a class="anchor" href="#update-the-document-header"></a>3. Update the document header</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">[id="acme-serve-http-requests-tutorial"] <i class="conum" data-value="1"></i><b>(1)</b>
= Serve Http requests using the Acme extension <i class="conum" data-value="2"></i><b>(2)</b>
include::_attributes.adoc[] <i class="conum" data-value="3"></i><b>(3)</b>
:categories: web <i class="conum" data-value="4"></i><b>(4)</b>
:extension-status: experimental <i class="conum" data-value="5"></i><b>(5)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Use the file name as a unique id for the section.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Add the title as a top-level heading.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Include additional attributes that help define consistent formatting and provide source portability.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Specify the <code>web</code> category, as our imaginary extension works with Http requests.</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>Our imaginary <code>acme</code> extension is experimental, so we include the extension status declaration in the header.</td>
</tr>
</table>
</div>
<div class="openblock">
<div class="title">Document Preview</div>
<div class="content">
<div class="paragraph">
<p>The preview of your document should contain the chosen title as a styled header at the top of the page.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="add-an-abstract"><a class="anchor" href="#add-an-abstract"></a>4. Add an abstract</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We want to let the readers of our tutorial know what they will achieve by following the steps in the tutorial.
This abstract should be concise and should use appropriate verbs (create, build, deploy, &#8230;&#8203;) to set expectations.
They should be able to determine if they want to engage with the content.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">Create an application that uses unique annotations from the experimental acme extension to define two endpoints:
a simple HTTP endpoint and an endpoint that emits server-sent events (SSE).
We will also use Quarkus dev mode for iterative development and testing.</code></pre>
</div>
</div>
<div class="openblock">
<div class="title">Document Preview</div>
<div class="content">
<div class="paragraph">
<p>The preview of your document should contain the abstract as a paragraph immediately following the header.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="include-extension-status-descriptive-text"><a class="anchor" href="#include-extension-status-descriptive-text"></a>5. Include extension status descriptive text</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As the <code>acme</code> extension is experimental, we&#8217;ll include <code>{includes}/extension-status.adoc</code> that provides extension status text.
It uses the extension status attribute defined in the header.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">include::{includes}/extension-status.adoc[]</code></pre>
</div>
</div>
<div class="openblock">
<div class="title">Document Preview</div>
<div class="content">
<div class="paragraph">
<p>The preview of your document should now include an admonition box below the abstract explaining that the plugin is experimental technology, and describing what can be expected in terms of stability or support for experimental technologies.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="define-prerequisites"><a class="anchor" href="#define-prerequisites"></a>6. Define Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We need to tell users what resources are required for completing the tutorial.</p>
</div>
<div class="paragraph">
<p>Any tutorial describing development activity should use  <code>{includes}/prerequisites.adoc</code> to ensure consistent language is used when describing prerequisites.
Declared <code>prerequisites-</code> attributes can customize the final text.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">== Prerequisites

:prerequisites-time: 30 minutes <i class="conum" data-value="1"></i><b>(1)</b>
:prerequisites-docker: <i class="conum" data-value="2"></i><b>(2)</b>
:prerequisites-no-graalvm: <i class="conum" data-value="3"></i><b>(3)</b>
include::{includes}/prerequisites.adoc[] <i class="conum" data-value="4"></i><b>(4)</b>

The `curl` command line utility is also used to manually test the endpoint.</code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Declare that our hypothetical tutorial will take about 30 minutes to complete.</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Declare that our nonsensical acme extension also requires a container runtime.</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>For simplicity in this tutorial, we will avoid GraalVM and Mandrel prerequisites.</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Include the common file that provides text describing prerequisites.</td>
</tr>
</table>
</div>
<div class="openblock">
<div class="title">Document Preview</div>
<div class="content">
<div class="paragraph">
<p>A second level <code>Prerequistes</code> heading should immediately follow the extension status box in your document preview.
It should state:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>that this tutorial will take roughly 30 minutes</p>
</li>
<li>
<p>that you need an IDE, JDK (with versions), maven (with a placeholder for the maven version), a working container runtime, and (optionally) the Quarkus CLI.</p>
</li>
</ul>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="describe-the-steps-for-completing-the-tutorial"><a class="anchor" href="#describe-the-steps-for-completing-the-tutorial"></a>7. Describe the steps for completing the tutorial</h2>
<div class="sectionbody">
<div class="paragraph">
<p>There are a few parts to this process.
Just remember that each step should conclude with a comprehensible/observable result: "The output should look something like this&#8230;&#8203;"</p>
</div>
<div class="sect2">
<h3 id="define-the-first-step"><a class="anchor" href="#define-the-first-step"></a>7.1. Define the first step</h3>
<div class="paragraph">
<p>Enable section numbering before specifying the header for the first step.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">:sectnums: <i class="conum" data-value="1"></i><b>(1)</b>
:sectnumlevels: 3
== Create a new project <i class="conum" data-value="2"></i><b>(2)</b>

Create a new project with the following command: <i class="conum" data-value="3"></i><b>(3)</b>

:create-app-artifact-id: acme-quickstart <i class="conum" data-value="4"></i><b>(4)</b>
:create-app-extensions: acme <i class="conum" data-value="5"></i><b>(5)</b>
include::{includes}/devtools/create-app.adoc[] <i class="conum" data-value="6"></i><b>(6)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Enable section numbering</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Create a second level heading for the first step</td>
</tr>
<tr>
<td><i class="conum" data-value="3"></i><b>3</b></td>
<td>Describe the step briefly</td>
</tr>
<tr>
<td><i class="conum" data-value="4"></i><b>4</b></td>
<td>Define the artifact id (Maven or Gradle)</td>
</tr>
<tr>
<td><i class="conum" data-value="5"></i><b>5</b></td>
<td>List the extensions required by this project</td>
</tr>
<tr>
<td><i class="conum" data-value="6"></i><b>6</b></td>
<td>Use common text to describe how to create a project</td>
</tr>
</table>
</div>
<div class="openblock">
<div class="title">Document Preview</div>
<div class="content">
<div class="paragraph">
<p>The document preview should now include a new section called <code>1. Create a new project</code>, that contains steps for creating a new project using both the Quarkus CLI and maven.</p>
</div>
</div>
</div>
</div>
<div class="sect2">
<h3 id="using-a-source-file"><a class="anchor" href="#using-a-source-file"></a>7.2. Using a source file</h3>
<div class="paragraph">
<p>In this tutorial, we are going to include code from a separate Java file using tags.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Consider this an aspirational example. Source is more commonly included directly in the source code block.
While there are advantages to including source from Java files,
there are details that we have to work out regarding where referenced code should live.
Help and ideas are welcome!</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Let&#8217;s create a file called <code>acme-serve-http-requests-MyAcmeApplication.java</code>.
While this is not a valid Java file name, it does sit nicely next to our tutorial source.
We&#8217;re going to rely on IDE magic for syntax checking.</p>
</div>
<div class="paragraph">
<p>Let&#8217;s add the following code to that file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">// tag::application[]
package org.acme;

import jakarta.enterprise.context.ApplicationScoped;

import org.acme.corp.Anvil;
import org.acme.corp.Toaster;

import io.smallrye.mutiny.Multi;

@ApplicationScoped // &lt;1&gt;
public class MyAcmeApplication {

    @Anvil(optional = {"name"}) // &lt;2&gt;
    public String hello(String name) {
        return String.format("Hello, %s!", (name == null ? "World" : name));
    }

    // tag::goodbye[]
    @Toaster // &lt;1&gt;
    public Multi&lt;String&gt; longGoodbye(String name) {
        return Multi.createFrom().items("Goodbye", ",", "Sweet", "Planet", "!"); // &lt;2&gt;
    }
    // end::goodbye[]
}
// end::application[]</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are a few things to notice in this code sample:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>AsciiDoc callouts are shown as comments on some lines, and their numbering is not sequential.</p>
</li>
<li>
<p>AsciiDoc content regions are defined by tag pairs (<code>tag::</code> and <code>end::</code>) in comments surrounding different sections of code.</p>
</li>
</ul>
</div>
</div>
<div class="sect2">
<h3 id="provide-concise-subsequent-steps"><a class="anchor" href="#provide-concise-subsequent-steps"></a>7.3. Provide concise subsequent steps</h3>
<div class="paragraph">
<p>Let&#8217;s now instruct the learner to create a simple endpoint using the imaginary <code>@Anvil</code> annotation.</p>
</div>
<div class="sect3">
<h4 id="create-a-source-code-file"><a class="anchor" href="#create-a-source-code-file"></a>7.3.1. Create a source code file</h4>
<div class="paragraph">
<p>We&#8217;ll start with the steps required to create and add an endpoint to a file.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">== Hello, World! as an Acme REST service

Let's create a Http endpoint using the `@Anvil` annotation.

Create a new source file, `src/main/java/org/acme/MyAcmeApplication.java`, and define the `MyAcmeApplication` bean as follows:

[source,java]
----
include::{doc-examples}/acme-serve-http-requests-MyAcmeApplication.java[tags=*;!goodbye]
----

&lt;1&gt; Specify the CDI lifecycle of this bean.
An `@ApplicationScoped` bean has a single bean instance that is used for the application.
&lt;2&gt; The `@Anvil` annotation always implies a simple Http GET request with the uri derived from the method name, `/hello` in this case.
The `optional` value indicates that the `name` parameter is not required.</code></pre>
</div>
</div>
<div class="paragraph">
<p>Some things to notice about these instructions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We are including code from the source file while using Asciidoc tagged regions to exclude the <code>goodbye</code> method from the listing.</p>
</li>
<li>
<p>We put some context around what <code>@ApplicationScoped</code> means, without going into details about alternative CDI lifecycles</p>
</li>
<li>
<p>We describe what <code>@Anvil</code> is providing in the specific case covered by this tutorial.</p>
</li>
</ul>
</div>
<div class="admonitionblock warning">
<table>
<tr>
<td class="icon">
<i class="fa icon-warning" title="Warning"></i>
</td>
<td class="content">
Be careful with the amount of explanation given in a tutorial.
Include enough information in the tutorial to help the user determine what other resource (<code>howto</code>, <code>concept</code>, or <code>reference</code>) they should look at next.
</td>
</tr>
</table>
</div>
<div class="openblock">
<div class="title">Document Preview</div>
<div class="content">
<div class="paragraph">
<p>Your preview should contain a new section, <code>2. Hello, World! as an Acme REST service</code> that includes the contents of <code>src/main/java/org/acme/MyAcmeApplication.java</code> with the <code>goodbye</code> method omitted.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="explore-continuous-development-and-test"><a class="anchor" href="#explore-continuous-development-and-test"></a>7.3.2. Explore continuous development and test</h4>
<div class="paragraph">
<p>It&#8217;s now time to walk the user through starting Quarkus dev mode.
A common include does most of the work for us:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">== Dev Mode: Hello, World!

Let's run our application using Quarkus' iterative development mode:

include::{includes}/devtools/dev.adoc[]

Once the console output from dev mode indicates that things are ready, use `curl` to invoke the `hello` endpoint:

[source,shell]
----
$ curl -w "\n" http://localhost:8080/hello
Hello, World!
----

Pass the name as a parameter:

[source,bash,subs=attributes+]
----
$ curl localhost:8080/hello -d '{"name": "bananas"}'
Hello, bananas!
----

You can leave dev mode running throughout the rest of the tutorial for continuous feedback as you make changes to code.
Use `CTRL-C` to exit dev mode.</code></pre>
</div>
</div>
<div class="paragraph">
<p>We&#8217;re providing a few things here:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We&#8217;re using common text that describes how to start dev mode.</p>
</li>
<li>
<p>We describe how to use <code>curl</code> to test the output of our defined endpoint.</p>
</li>
</ul>
</div>
<div class="openblock">
<div class="title">Document Preview</div>
<div class="content">
<div class="paragraph">
<p>Your preview should contain a new section, "3. Dev Mode: Hello, World!"
That section should include three methods of launching Quarkus dev mode (cli, maven, gradle).
It should have codeblocks containing curl console commands and output, and instructions for how to exit dev mode.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="adding-tests"><a class="anchor" href="#adding-tests"></a>7.3.3. Adding tests</h4>
<div class="paragraph">
<p>Now let&#8217;s walk users through adding a test to their application:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">== Testing: Hello, World!

Let's create a test to work with our `@Anvil` endpoint.

Create a new source file, `src/test/java/org/acme/MyAcmeApplicationTest.java`, and define `MyAcmeApplicationTest` as follows:

[source,java]
----
include::{doc-examples}/acme-serve-http-requests-MyAcmeApplicationTest.java[tags=*;!goodbye]
----

After saving, the dev console should detect the presence of tests, but it isn't running by default.
The bottom of the console screen will display a message indicating that running tests have been paused.

Press `r` to resume testing.
You should see the status change as tests are running, and it should finish with a message indicating that 1 test was run and that it was successful.</code></pre>
</div>
</div>
<div class="paragraph">
<p>We&#8217;re using Asciidoc region tags to exclude a method from the listing (that we will be adding later).</p>
</div>
<div class="openblock">
<div class="title">Document Preview</div>
<div class="content">
<div class="paragraph">
<p>Your preview should contain a new section, <code>4. Testing: Hello, World!</code> that includes the contents of <code>src/main/java/org/acme/MyAcmeApplicationTest.java</code> with the <code>testGoodbyeEndpoint</code> method omitted.</p>
</div>
</div>
</div>
</div>
<div class="sect3">
<h4 id="add-additional-capabilities"><a class="anchor" href="#add-additional-capabilities"></a>7.3.4. Add additional capabilities</h4>
<div class="paragraph">
<p>Let&#8217;s add another step for creating a different endpoint using the imaginary <code>@Toaster</code> annotation, and for providing a corresponding test.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">== Goodbye, Sweet Planet! Server sent events with Acme

Let's add an endpoint that supports Server Sent Events using the `@Toaster` annotation:

[source,java]
----
include::{doc-examples}/acme-serve-http-requests-MyAcmeApplication.java[tag=goodbye]
----
&lt;1&gt; The `@Toaster` annotation indicates that this method emits Server-Sent Events.
&lt;2&gt; A `Multi` is an asynchronous publisher of multiple events provided by Mutiny, the event-driven reactive streams library used by Quarkus.

== Testing: Goodbye, Sweet Planet!

Let's create a test to work with our `@Toaster` endpoint.

Add the following method to `src/test/java/org/acme/MyAcmeApplicationTest.java`:

[source,java]
----
include::{doc-examples}/acme-serve-http-requests-MyAcmeApplicationTest.java[tag=goodbye]
----

After saving, the dev console should detect the presence of the additional test, and run both.
You should see a message that 2 tests were run, and both were successful.</code></pre>
</div>
</div>
<div class="paragraph">
<p>A few things to note:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>We&#8217;re using the AsciiDoc region tag to include only one region of the target file.</p>
</li>
<li>
<p>We do not go into detail explaining concepts:</p>
<div class="ulist">
<ul>
<li>
<p>We talk about what the <code>@Toaster</code> annotation is doing in this example.</p>
</li>
<li>
<p>We define the term <code>Multi</code> in a way that helps a user find their way to other related materials (How to, Concept, or Reference).</p>
</li>
</ul>
</div>
</li>
</ul>
</div>
<div class="openblock">
<div class="title">Document preview</div>
<div class="content">
<div class="paragraph">
<p>Your preview should now contain two new sections, <code>5. Goodbye, Sweet Planet! Server sent events with Acme</code> and <code>6. Testing: Goodbye, Sweet Planet!</code>.</p>
</div>
<div class="paragraph">
<p>The two new code listings should be focused on the methods that were omitted before:
<code>goodbye</code> from <code>src/main/java/org/acme/MyAcmeApplication.java</code>, and <code>testGoodbyeEndpoint</code> from <code>src/main/java/org/acme/MyAcmeApplicationTest.java</code>.</p>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="provide-a-summary-section"><a class="anchor" href="#provide-a-summary-section"></a>8. Provide a Summary section</h2>
<div class="sectionbody">
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">:sectnums!: <i class="conum" data-value="1"></i><b>(1)</b>
== Summary

Congratulations! You have created a project that uses the acme extension to create fanciful endpoints using the `@Anvil` and `@Toaster` annotations. <i class="conum" data-value="2"></i><b>(2)</b></code></pre>
</div>
</div>
<div class="colist arabic">
<table>
<tr>
<td><i class="conum" data-value="1"></i><b>1</b></td>
<td>Turn off section numbering</td>
</tr>
<tr>
<td><i class="conum" data-value="2"></i><b>2</b></td>
<td>Congratulate the user on a job well done!</td>
</tr>
</table>
</div>
<div class="openblock">
<div class="title">Document preview</div>
<div class="content">
<div class="paragraph">
<p>Your preview should now contain an unnumbered <code>Summary</code> section.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="summary"><a class="anchor" href="#summary"></a>Summary</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Congratulations!
You have created a tutorial that describes how to create an application that uses annotations of dubious merit from a hypothetical extension.</p>
</div>
<div class="paragraph">
<p>Compare your result against the complete worked example:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-asciidoc hljs" data-lang="asciidoc">Unresolved directive in doc-create-tutorial.adoc - include::{doc-examples}/acme-serve-http-requests-tutorial.adoctxt[]</code></pre>
</div>
</div>
</div>
</div>