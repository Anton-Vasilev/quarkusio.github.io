<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>If you prefer to use Spring Boot <code>@ConfigurationProperties</code> annotated class to access application properties instead of
<a href="config-mappings#config-mappings"><code>@ConfigMapping</code></a> or a MicroProfile <code>@ConfigProperty</code> approach, you can do that with this extension.</p>
</div>
<div class="admonitionblock important">
<table>
<tr>
<td class="icon">
<i class="fa icon-important" title="Important"></i>
</td>
<td class="content">
Spring Boot <code>@ConfigurationProperties</code> has a few limitations. For instance, <code>Map</code> injection is not
supported. Consider using <a href="config-mappings">Mapping configuration to objects</a>.
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="prerequisites"><a class="anchor" href="#prerequisites"></a>Prerequisites</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Unresolved directive in spring-boot-properties.adoc - include::{includes}/prerequisites.adoc[]</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="solution"><a class="anchor" href="#solution"></a>Solution</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We recommend that you follow the instructions in the next sections and create the application step by step.
However, you can go right to the completed example.</p>
</div>
<div class="paragraph">
<p>Clone the Git repository: <code>git clone <a href="https://github.com/quarkusio/quarkus-quickstarts.git" class="bare">https://github.com/quarkusio/quarkus-quickstarts.git</a></code>, or download an <a href="https://github.com/quarkusio/quarkus-quickstarts/archive/main.zip">archive</a>.</p>
</div>
<div class="paragraph">
<p>The solution is located in the <code>spring-boot-properties-quickstart</code> <a href="https://github.com/quarkusio/quarkus-quickstarts/tree/main/spring-boot-properties-quickstart">directory</a>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="creating-the-maven-project"><a class="anchor" href="#creating-the-maven-project"></a>Creating the Maven project</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, we need a new project. Create a new project with the following command:</p>
</div>
<div class="paragraph">
<p>Unresolved directive in spring-boot-properties.adoc - include::{includes}/devtools/create-app.adoc[]</p>
</div>
<div class="paragraph">
<p>This command generates a project and imports the <code>spring-boot-properties</code> extension.</p>
</div>
<div class="paragraph">
<p>If you already have your Quarkus project configured, you can add the <code>spring-boot-properties</code> extension
to your project by running the following command in your project base directory:</p>
</div>
<div class="paragraph">
<p>Unresolved directive in spring-boot-properties.adoc - include::{includes}/devtools/extension-add.adoc[]</p>
</div>
<div class="paragraph">
<p>This will add the following to your build file:</p>
</div>
<div class="listingblock primary asciidoc-tabs-target-sync-cli asciidoc-tabs-target-sync-maven">
<div class="title">pom.xml</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-xml hljs" data-lang="xml">&lt;dependency&gt;
    &lt;groupId&gt;io.quarkus&lt;/groupId&gt;
    &lt;artifactId&gt;quarkus-spring-boot-properties&lt;/artifactId&gt;
&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="listingblock secondary asciidoc-tabs-target-sync-gradle">
<div class="title">build.gradle</div>
<div class="content">
<pre class="highlightjs highlight"><code class="language-gradle hljs" data-lang="gradle">implementation("io.quarkus:quarkus-spring-boot-properties")</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="greetingcontroller"><a class="anchor" href="#greetingcontroller"></a>GreetingController</h2>
<div class="sectionbody">
<div class="paragraph">
<p>First, create a <code>GreetingResource</code> Jakarta REST resource in the
<code>src/main/java/org/acme/spring/boot/properties/GreetingResource.java</code> file that looks like:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.spring.boot.properties;

import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.core.MediaType;

@Path("/hello")
public class GreetingResource {

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String hello() {
        return "hello";
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="injecting-properties"><a class="anchor" href="#injecting-properties"></a>Injecting properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Create a new class <code>src/main/java/org/acme/spring/boot/properties/GreetingProperties.java</code> with a message field:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.spring.boot.properties;

import org.springframework.boot.context.properties.ConfigurationProperties;

@ConfigurationProperties("greeting")
public class GreetingProperties {

    public String text;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here <code>text</code> field is public, but it could also be a private field with getter and setter or just a public getter in an interface.
Because <code>text</code> does not have a default value it is considered required and unless it is defined in a configuration file (<code>application.properties</code> by default)  your application will fail to start.
Define this property in your <code>src/main/resources/application.properties</code> file:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># Your configuration properties
greeting.text = hello</code></pre>
</div>
</div>
<div class="paragraph">
<p>Now modify <code>GreetingResource</code> to start using the <code>GreetingProperties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.spring.boot.properties;

import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.core.MediaType;

@Path("/greeting")
public class GreetingResource {

    @Inject
    GreetingProperties properties;

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String hello() {
        return properties.text;
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the tests to verify that application still functions correctly.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="package-and-run-the-application"><a class="anchor" href="#package-and-run-the-application"></a>Package and run the application</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Run the application in dev mode with:</p>
</div>
<div class="paragraph">
<p>Unresolved directive in spring-boot-properties.adoc - include::{includes}/devtools/dev.adoc[]</p>
</div>
<div class="paragraph">
<p>Open your browser to <a href="http://localhost:8080/greeting" class="bare">http://localhost:8080/greeting</a>.</p>
</div>
<div class="paragraph">
<p>Changing the configuration file is immediately reflected.</p>
</div>
<div class="paragraph">
<p>As usual, the application can be packaged using:</p>
</div>
<div class="paragraph">
<p>Unresolved directive in spring-boot-properties.adoc - include::{includes}/devtools/build.adoc[]</p>
</div>
<div class="paragraph">
<p>And executed using <code>java -jar target/quarkus-app/quarkus-run.jar</code>.</p>
</div>
<div class="paragraph">
<p>You can also generate the native executable with:</p>
</div>
<div class="paragraph">
<p>Unresolved directive in spring-boot-properties.adoc - include::{includes}/devtools/build-native.adoc[]</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="default-values"><a class="anchor" href="#default-values"></a>Default values</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now let&#8217;s add a suffix for a greeting for which we&#8217;ll set a default value.</p>
</div>
<div class="paragraph">
<p>Properties with default values can be configured in a configuration file just like any other property.
However, the default value will be used if the property was not defined in a configuration file.</p>
</div>
<div class="paragraph">
<p>Go ahead and add the new field to the <code>GreetingProperties</code> class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.spring.boot.properties;

import org.springframework.boot.context.properties.ConfigurationProperties;

@ConfigurationProperties("greeting")
public class GreetingProperties {

    public String text;

    public String suffix = "!";
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And update the <code>GreetingResource</code> and its test <code>GreetingResourceTest</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.spring.boot.properties;

import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.core.MediaType;

@Path("/greeting")
public class GreetingResource {

    @Inject
    GreetingProperties properties;

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String hello() {
        return properties.text + properties.suffix;
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.spring.boot.properties;

import io.quarkus.test.junit.QuarkusTest;
import org.junit.jupiter.api.Test;

import static io.restassured.RestAssured.given;
import static org.hamcrest.CoreMatchers.is;

@QuarkusTest
public class GreetingResourceTest {

    @Test
    public void testHelloEndpoint() {
        given()
          .when().get("/greeting")
          .then()
             .statusCode(200)
             .body(is("hello!"));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the tests to verify the change.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="optional-values"><a class="anchor" href="#optional-values"></a>Optional values</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Properties with optional values are the middle-ground between standard and properties with default values.
While a missing property in a configuration file will not cause your application to fail, it will nevertheless not have a value set.
We use <code>java.util.Optional</code> type to define such properties.</p>
</div>
<div class="paragraph">
<p>Add an optional <code>name</code> property to the <code>GreetingProperties</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.spring.boot.properties;

import java.util.Optional;

import org.springframework.boot.context.properties.ConfigurationProperties;

@ConfigurationProperties("greeting")
public class GreetingProperties {

    public String text;

    public String suffix = "!";

    public Optional&lt;String&gt; name;
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>And update the <code>GreetingResource</code> and its test <code>GreetingResourceTest</code>:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.spring.boot.properties;

import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.core.MediaType;

@Path("/greeting")
public class GreetingResource {

    @Inject
    GreetingProperties properties;

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String hello() {
        return properties.text + ", " + properties.name.orElse("You") + properties.suffix;
    }
}</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.spring.boot.properties;

import io.quarkus.test.junit.QuarkusTest;
import org.junit.jupiter.api.Test;

import static io.restassured.RestAssured.given;
import static org.hamcrest.CoreMatchers.is;

@QuarkusTest
public class GreetingResourceTest {

    @Test
    public void testHelloEndpoint() {
        given()
          .when().get("/greeting")
          .then()
             .statusCode(200)
             .body(is("hello, You!"));
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Run the tests to verify the change.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="grouping-properties"><a class="anchor" href="#grouping-properties"></a>Grouping properties</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Now we have three properties in our <code>GreetingProperties</code> class.
While <code>name</code> could be considered more of a runtime property (and maybe could be passed as an HTTP query parameter in the future), <code>text</code> and <code>suffix</code> are used to define a message template.
Let&#8217;s group these two properties in a separate inner class:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.spring.boot.properties;

import java.util.Optional;

import org.springframework.boot.context.properties.ConfigurationProperties;

@ConfigurationProperties("greeting")
public class GreetingProperties {

    public Message message;

    public Optional&lt;String&gt; name;

    public static class Message {

        public String text;

        public String suffix = "!";
    }
}</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here <code>Message</code> properties class is defined as an inner class, but it could also be a top level class.</p>
</div>
<div class="paragraph">
<p>Having such property groups brings more structure to your configuration.
This is especially useful when then number of properties grows.</p>
</div>
<div class="paragraph">
<p>Because of the additional class, our property names have changed.
Let&#8217;s update the properties file and the <code>GreetingResource</code> class.</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-properties hljs" data-lang="properties"># Your configuration properties
greeting.message.text = hello</code></pre>
</div>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code class="language-java hljs" data-lang="java">package org.acme.spring.boot.properties;

import jakarta.inject.Inject;
import jakarta.ws.rs.GET;
import jakarta.ws.rs.Path;
import jakarta.ws.rs.Produces;
import jakarta.ws.rs.core.MediaType;

@Path("/greeting")
public class GreetingResource {

    @Inject
    GreetingProperties properties;

    @GET
    @Produces(MediaType.TEXT_PLAIN)
    public String hello() {
        return properties.message.text + ", " + properties.name.orElse("You") + properties.message.suffix;
    }
}</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="more-spring-guides"><a class="anchor" href="#more-spring-guides"></a>More Spring guides</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Quarkus has more Spring compatibility features. See the following guides for more details:</p>
</div>
<div class="ulist">
<ul>
<li>
<p><a href="spring-di">Quarkus - Extension for Spring DI</a></p>
</li>
<li>
<p><a href="spring-web">Quarkus - Extension for Spring Web</a></p>
</li>
<li>
<p><a href="spring-data-jpa">Quarkus - Extension for Spring Data JPA</a></p>
</li>
<li>
<p><a href="spring-data-rest">Quarkus - Extension for Spring Data REST</a></p>
</li>
<li>
<p><a href="spring-security">Quarkus - Extension for Spring Security</a></p>
</li>
<li>
<p><a href="spring-cloud-config-client">Quarkus - Reading properties from Spring Cloud Config Server</a></p>
</li>
<li>
<p><a href="spring-cache">Quarkus - Extension for Spring Cache</a></p>
</li>
<li>
<p><a href="spring-scheduled">Quarkus - Extension for Spring Scheduled</a></p>
</li>
</ul>
</div>
</div>
</div>